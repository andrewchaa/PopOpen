namespace PopFs.Tests

open NUnit.Framework
open FsUnit
open Pop
open System.Diagnostics

[<TestFixture>]
type ``Given OpenInternal`` ()=
    
        
    [<Test>] 
    member x. ``When find the locking handle of a file, it uses it`` ()=
        let file = "file"
        let start f = ()
        let handle = nativeint 0
        let getLockingProcessHandle file = nativeint 10

        PopOpen.OpenInternal start "file" handle getLockingProcessHandle |> should equal (nativeint 10)

    [<Test>] 
    member x. ``When can't find the locking handle of a file, it uses the handle from Process.Start`` ()=
        let file = "file"
        let start f = ()
        let handle = nativeint 10
        let getLockingProcessHandle file = nativeint 0

        PopOpen.OpenInternal start "file" handle getLockingProcessHandle |> should equal (nativeint 10)


